<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AxonaPulse - Intelligent Relief</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; overflow-x: hidden; }
        
        .model-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: 0;
            pointer-events: none;
        }
        
        #model-canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .content-overlay {
            position: relative;
            z-index: 10;
            min-height: 100vh;
        }
        
        .hero-section {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 20;
        }
        
        .feature-section {
            height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            z-index: 20;
            padding: 0 5%;
        }
        
        .feature-content {
            max-width: 600px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Section indicators */
        .section-indicator {
            position: fixed;
            right: 40px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .indicator-dot.active {
            background: white;
            transform: scale(1.3);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }
        
        .indicator-dot::after {
            content: attr(data-label);
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            white-space: nowrap;
            font-size: 12px;
            color: white;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-weight: 500;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .indicator-dot:hover::after {
            opacity: 1;
        }
        
        /* Loader */
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
            transition: opacity 0.5s ease;
        }
        
        .progress {
            width: 200px;
            height: 4px;
            background: #333;
            margin-top: 20px;
            overflow: hidden;
            border-radius: 2px;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #0ea5e9, #38bdf8);
            width: 0%;
            transition: width 0.3s;
            border-radius: 2px;
        }
        
        .demo-notice {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 18px;
            border-radius: 8px;
            font-size: 13px;
            z-index: 100;
            display: none;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Animation classes */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }
        
        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Mobile adjustments */
        @media (max-width: 768px) {
            .feature-section {
                padding: 0 20px;
                justify-content: center;
            }
            
            .feature-content {
                padding: 30px;
                margin: 0 20px;
            }
            
            .section-indicator {
                right: 20px;
            }
            
            .indicator-dot::after {
                display: none;
            }
        }
    </style>
</head>
<body class="text-gray-900">
    <!-- Loader -->
    <div id="loader">
        <div class="text-center">
            <h3 class="text-xl font-semibold mb-4">Loading AxonaPulse Experience...</h3>
            <div class="progress">
                <div class="progress-bar"></div>
            </div>
            <div id="loader-error" class="mt-4 text-gray-400 text-sm"></div>
        </div>
    </div>
    
    <!-- Demo Notice -->
    <div class="demo-notice" id="demo-notice">
        Interactive 3D Experience
    </div>
    
    <!-- 3D Model Container -->
    <div class="model-container">
        <canvas id="model-canvas"></canvas>
    </div>

    <!-- Section Indicators -->
    <div class="section-indicator">
        <div class="indicator-dot active" data-label="Welcome" data-section="hero"></div>
        <div class="indicator-dot" data-label="Dual-Action Therapy" data-section="feature1"></div>
        <div class="indicator-dot" data-label="Smart Integration" data-section="feature2"></div>
        <div class="indicator-dot" data-label="Premium Design" data-section="feature3"></div>
        <div class="indicator-dot" data-label="Specifications" data-section="feature4"></div>
    </div>

    <!-- Header (Original with slight modification) -->
    <header class="sticky top-0 z-50 w-full bg-white/80 backdrop-blur-lg border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0">
                    <a href="index.html" class="text-2xl font-bold text-gray-900">Axona</a>
                </div>
                <nav class="hidden md:flex md:space-x-10">
                    <a href="index.html" class="nav-item text-gray-500 hover:text-gray-900 font-medium" data-page="index">Products</a>
                    <a href="about.html" class="nav-item text-gray-500 hover:text-gray-900 font-medium" data-page="about">About Us</a>
                    <a href="product-detail.html" class="nav-item text-gray-500 hover:text-gray-900 font-medium font-semibold text-brand-600" data-page="product">AxonaPulse</a>
                </nav>
                <div class="flex md:hidden">
                    <button id="mobile-menu-btn" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-brand-500">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" id="icon-open" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
                        <svg class="hidden block h-6 w-6" id="icon-close" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden border-t border-gray-200">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="index.html" class="nav-item block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50" data-page="index">Products</a>
                <a href="about.html" class="nav-item block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50" data-page="about">About Us</a>
                <a href="product-detail.html" class="nav-item block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 font-semibold text-brand-600" data-page="product">AxonaPulse</a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="content-overlay">
        <!-- Hero Section -->
        <section class="hero-section" id="hero-section">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <p class="text-lg font-semibold text-brand-400 mb-4 animate-on-scroll">AxonaPulse</p>
                <h1 class="text-5xl sm:text-7xl font-bold tracking-tight text-white mb-6 animate-on-scroll" style="text-shadow: 0 4px 12px rgba(0,0,0,0.3);">
                    Intelligent, targeted relief.
                </h1>
                <p class="text-xl sm:text-2xl max-w-3xl mx-auto text-gray-200 mb-12 animate-on-scroll" style="text-shadow: 0 2px 8px rgba(0,0,0,0.3);">
                    The first smart neckwear to combine therapeutic Infrared heat with targeted electroimpulse stimulation.
                </p>
                <div class="animate-on-scroll">
                    <button class="bg-white text-gray-900 px-8 py-4 rounded-full font-semibold text-lg hover:bg-gray-100 transition-all duration-300 shadow-2xl hover:shadow-3xl transform hover:-translate-y-1">
                        Experience Innovation
                    </button>
                </div>
            </div>
        </section>

        <!-- Feature 1: Dual-Action Therapy -->
        <section class="feature-section" id="feature1-section">
            <div class="feature-content animate-on-scroll">
                <span class="inline-block px-4 py-1 bg-brand-100 text-brand-700 rounded-full text-sm font-semibold mb-4">Core Technology</span>
                <h2 class="text-4xl font-bold tracking-tight mb-4 text-gray-900">Dual-Action Therapy</h2>
                <p class="text-gray-700 leading-relaxed mb-6">
                    AxonaPulse combines two proven technologies. First, deep-penetrating <strong class="text-brand-600">Infrared (IR) heat</strong> warms muscles to increase blood flow and release tension.
                </p>
                <p class="text-gray-700 leading-relaxed mb-6">
                    Simultaneously, gentle <strong class="text-brand-600">electroimpulse stimulation</strong> targets specific nerves to block pain signals and trigger the release of endorphins, your body's natural painkillers.
                </p>
                <div class="flex items-center mt-8">
                    <div class="w-3 h-3 bg-brand-500 rounded-full mr-3"></div>
                    <span class="text-gray-600">Real-time muscle tension monitoring</span>
                </div>
                <div class="flex items-center mt-3">
                    <div class="w-3 h-3 bg-brand-500 rounded-full mr-3"></div>
                    <span class="text-gray-600">Adaptive therapy adjustment</span>
                </div>
            </div>
        </section>

        <!-- Feature 2: Smart Integration -->
        <section class="feature-section" id="feature2-section">
            <div class="feature-content ml-auto animate-on-scroll">
                <span class="inline-block px-4 py-1 bg-brand-100 text-brand-700 rounded-full text-sm font-semibold mb-4">Smart Technology</span>
                <h2 class="text-4xl font-bold tracking-tight mb-4 text-gray-900">Smart. Simple. Connected.</h2>
                <p class="text-gray-700 leading-relaxed mb-6">
                    Integrated biosensors monitor muscle tension and adapt the therapy in real-time for optimal relief.
                </p>
                <p class="text-gray-700 leading-relaxed mb-6">
                    Connect to the <strong class="text-brand-600">Axona App</strong> to customize your session, track your progress over time, and receive personalized wellness guidance. It's your personal therapist, on demand.
                </p>
                <div class="bg-gradient-to-r from-brand-500 to-brand-600 text-white p-6 rounded-xl mt-8">
                    <h3 class="font-bold text-lg mb-2">App Features</h3>
                    <ul class="list-disc list-inside space-y-1">
                        <li>Personalized therapy programs</li>
                        <li>Progress tracking & analytics</li>
                        <li>Wellness recommendations</li>
                        <li>Sleep optimization</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Feature 3: Premium Design -->
        <section class="feature-section" id="feature3-section">
            <div class="feature-content animate-on-scroll">
                <span class="inline-block px-4 py-1 bg-brand-100 text-brand-700 rounded-full text-sm font-semibold mb-4">Design Excellence</span>
                <h2 class="text-4xl font-bold tracking-tight mb-4 text-gray-900">Designed for your life.</h2>
                <p class="text-gray-700 leading-relaxed mb-6">
                    Made from medical-grade, hypoallergenic silicone, AxonaPulse is lightweight, flexible, and discreet. Experience comfort without compromise.
                </p>
                <p class="text-gray-700 leading-relaxed mb-8">
                    Its minimalist design fits seamlessly under your collar, while the 3-day battery life means it's always ready when you are. Wear it at the office, at home, or while traveling.
                </p>
                <div class="grid grid-cols-2 gap-6 mt-8">
                    <div class="text-center p-4 bg-gray-50 rounded-lg">
                        <div class="text-2xl font-bold text-brand-600">72h</div>
                        <div class="text-gray-600 text-sm">Battery Life</div>
                    </div>
                    <div class="text-center p-4 bg-gray-50 rounded-lg">
                        <div class="text-2xl font-bold text-brand-600">280g</div>
                        <div class="text-gray-600 text-sm">Weight</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Feature 4: Specifications -->
        <section class="feature-section" id="feature4-section">
            <div class="feature-content ml-auto animate-on-scroll">
                <span class="inline-block px-4 py-1 bg-brand-100 text-brand-700 rounded-full text-sm font-semibold mb-4">Technical Specs</span>
                <h2 class="text-4xl font-bold tracking-tight mb-6 text-gray-900">Precision Engineering</h2>
                <div class="space-y-6">
                    <div>
                        <h3 class="font-semibold text-gray-900 mb-2">Infrared Therapy</h3>
                        <p class="text-gray-600">Dual-band IR heating (850nm & 940nm) with temperature control (35-45°C)</p>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-900 mb-2">Electroimpulse</h3>
                        <p class="text-gray-600">Micro-current stimulation (0-50mA) with 8 intensity levels</p>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-900 mb-2">Sensors</h3>
                        <p class="text-gray-600">EMG muscle sensors, temperature sensors, and motion detection</p>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-900 mb-2">Connectivity</h3>
                        <p class="text-gray-600">Bluetooth 5.2, USB-C fast charging, wireless updates</p>
                    </div>
                </div>
                <button class="w-full mt-10 bg-brand-600 text-white py-4 rounded-xl font-semibold text-lg hover:bg-brand-700 transition-all duration-300 shadow-lg hover:shadow-xl">
                    Order Now – $349
                </button>
            </div>
        </section>
    </main>

    <!-- Footer (Original) -->
    <footer class="bg-gray-900 text-gray-300 border-t border-gray-700 relative z-30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12">
                <div class="md:col-span-1">
                    <h3 class="text-2xl font-bold text-white">Axona</h3>
                    <p class="mt-2 text-gray-400">The Future of Wellness</p>
                </div>
                <div>
                    <h4 class="text-sm font-semibold uppercase text-gray-400 tracking-wider">Navigate</h4>
                    <ul class="mt-4 space-y-3">
                        <li><a href="index.html" class="text-base hover:text-white">Products</a></li>
                        <li><a href="about.html" class="text-base hover:text-white">About Us</a></li>
                        <li><a href="product-detail.html" class="text-base hover:text-white">AxonaPulse</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-sm font-semibold uppercase text-gray-400 tracking-wider">Contact Us</h4>
                    <ul class="mt-4 space-y-3">
                        <li><p class="text-base">123 Innovation Drive<br>Med-Tech Valley, CA 94000</p></li>
                        <li><a href="mailto:hello@axona.com" class="text-base hover:text-white">hello@axona.com</a></li>
                        <li><a href="tel:1-800-555-AXON" class="text-base hover:text-white">1-800-555-AXON</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-sm font-semibold uppercase text-gray-400 tracking-wider">Follow Us</h4>
                    <div class="flex mt-4 space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white"><span class="sr-only">Twitter</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.71v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path></svg></a>
                        <a href="#" class="text-gray-400 hover:text-white"><span class="sr-only">LinkedIn</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" clip-rule="evenodd"></path></svg></a>
                    </div>
                </div>
            </div>
            <div class="mt-12 border-t border-gray-700 pt-8 text-center">
                <p class="text-base text-gray-400">&copy; 2025 Axona Medical, Inc. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/libs/draco/draco_decoder.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/DRACOLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <!-- Main JS -->
    <!-- Main JS -->
    <script>
// Enhanced scroll effects for product page
function setupProductScrollAnimations() {
    // Animation for feature content
    const observerOptions = {
        threshold: 0.2,
        rootMargin: '0px 0px -100px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, observerOptions);

    // Observe all animate-on-scroll elements
    document.querySelectorAll('.animate-on-scroll').forEach(el => {
        observer.observe(el);
    });

    // Setup section indicator
    const sections = ['hero-section', 'feature1-section', 'feature2-section', 'feature3-section', 'feature4-section'];
    const indicators = document.querySelectorAll('.indicator-dot');
    
    // Scroll to section when indicator is clicked
    indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
            const section = document.getElementById(sections[index]);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
            }
        });
    });

    // Update active indicator on scroll
    window.addEventListener('scroll', () => {
        let currentSection = '';
        
        sections.forEach(sectionId => {
            const section = document.getElementById(sectionId);
            if (section) {
                const rect = section.getBoundingClientRect();
                if (rect.top <= window.innerHeight / 2 && rect.bottom >= window.innerHeight / 2) {
                    currentSection = sectionId;
                }
            }
        });
        
        indicators.forEach(indicator => {
            const section = indicator.getAttribute('data-section');
            if (currentSection.includes(section)) {
                indicator.classList.add('active');
            } else {
                indicator.classList.remove('active');
            }
        });
    });

    // Initialize GSAP scroll animations for 3D model
    if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {
        setup3DScrollAnimations();
    }
}

function setup3DScrollAnimations() {
    if (!window.model || !window.scene || !window.camera) {
        console.log('Waiting for model to load...');
        setTimeout(setup3DScrollAnimations, 500);
        return;
    }
    
    console.log('Setting up 3D scroll animations...');
    
    // Kill any existing ScrollTriggers
    ScrollTrigger.getAll().forEach(trigger => trigger.kill());
    
    // Create a master timeline for scroll animations
    const tl = gsap.timeline({
        scrollTrigger: {
            trigger: '.content-overlay',
            start: 'top top',
            end: 'bottom bottom',
            scrub: 1,
            onUpdate: (self) => {
                const progress = self.progress;
                
                // 1. MODEL ROTATION - like index.html
                if (window.model) {
                    window.model.rotation.y = progress * Math.PI * 4; // 2 full rotations
                    
                    // 2. MODEL POSITION - Move left/right based on scroll position
                    // Map progress (0-1) to x position (-3 to 3)
                    const sectionCount = 5;
                    const sectionProgress = progress * sectionCount;
                    const sectionIndex = Math.floor(sectionProgress);
                    
                    // Set target positions for each section
                    const sectionPositions = [0, 3, -3, 3, -3]; // Center, Right, Left, Right, Left
                    
                    if (sectionIndex < sectionPositions.length) {
                        // Smooth transition between sections
                        const sectionFraction = sectionProgress - sectionIndex;
                        const currentPos = sectionPositions[sectionIndex];
                        const nextPos = sectionIndex + 1 < sectionPositions.length ? sectionPositions[sectionIndex + 1] : currentPos;
                        const targetX = currentPos + (nextPos - currentPos) * sectionFraction;
                        
                        window.model.position.x = targetX;
                    }
                    
                    // 3. CAMERA MOVEMENT - subtle zoom and vertical movement
                    const cameraZ = 6 - (progress * 1.5); // Zoom in slightly as we scroll
                    window.camera.position.z = Math.max(cameraZ, 4);
                    
                    const cameraY = 1.5 + Math.sin(progress * Math.PI) * 0.5;
                    window.camera.position.y = cameraY;
                    
                    // 4. MODEL SCALE - subtle pulsing
                    const scale = 0.8 + Math.sin(progress * Math.PI * 8) * 0.05;
                    window.model.scale.setScalar(scale);
                    
                    // 5. Keep camera looking at model
                    window.camera.lookAt(window.model.position);
                }
            }
        }
    });
    
    // Add section-specific triggers for more precise model positioning
    const sections = [
        { id: 'hero-section', x: 0 },
        { id: 'feature1-section', x: 3 },    // Right (left card)
        { id: 'feature2-section', x: -3 },   // Left (right card)
        { id: 'feature3-section', x: 3 },    // Right (left card)
        { id: 'feature4-section', x: -3 }    // Left (right card)
    ];
    
    sections.forEach((section, index) => {
        const element = document.getElementById(section.id);
        if (element) {
            ScrollTrigger.create({
                trigger: element,
                start: 'top center',
                end: 'bottom center',
                onEnter: () => {
                    if (window.model) {
                        gsap.to(window.model.position, {
                            x: section.x,
                            duration: 0.8,
                            ease: "power2.out"
                        });
                    }
                },
                onLeaveBack: () => {
                    if (window.model) {
                        const prevSection = sections[Math.max(0, index - 1)];
                        gsap.to(window.model.position, {
                            x: prevSection.x,
                            duration: 0.8,
                            ease: "power2.out"
                        });
                    }
                }
            });
        }
    });
    
    console.log('3D scroll animations setup complete');
}

// Also, update the initProductViewer function to ensure model is properly accessible
function initProductViewer() {
    console.log('Initializing product 3D viewer...');
    
    // Check if Three.js is available
    if (typeof THREE === 'undefined') {
        console.error('Three.js not loaded');
        hideLoader();
        return;
    }
    
    // Setup scene
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000000);
    
    // Setup camera
    const camera = new THREE.PerspectiveCamera(
        45,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
    );
    camera.position.z = 6;
    camera.position.y = 1.5;
    
    // Setup renderer
    const canvas = document.getElementById('model-canvas');
    if (!canvas) {
        console.error('Canvas element not found');
        return;
    }
    
    const renderer = new THREE.WebGLRenderer({
        canvas: canvas,
        antialias: true,
        alpha: true
    });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.shadowMap.enabled = true;
    renderer.toneMapping = THREE.ACESFilmicToneMapping;
    renderer.toneMappingExposure = 1.2;
    
    // Add lighting
    const ambientLight = new THREE.AmbientLight(0x0ea5e9, 0.6);
    scene.add(ambientLight);
    
    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
    directionalLight.position.set(5, 10, 7);
    directionalLight.castShadow = true;
    scene.add(directionalLight);
    
    const fillLight = new THREE.DirectionalLight(0xffffff, 0.4);
    fillLight.position.set(-5, 5, -7);
    scene.add(fillLight);
    
    const rimLight = new THREE.DirectionalLight(0xffffff, 0.3);
    rimLight.position.set(0, -5, -10);
    scene.add(rimLight);
    
    // Try to load your local model
    let model = null;
    let isModelLoaded = false;
    
    // Create loader
    const loader = new THREE.GLTFLoader();
    
    // Set up Draco loader if available
    if (typeof THREE.DRACOLoader !== 'undefined') {
        try {
            const dracoLoader = new THREE.DRACOLoader();
            dracoLoader.setDecoderPath('https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/libs/draco/');
            loader.setDRACOLoader(dracoLoader);
            console.log('✅ Draco loader configured');
        } catch (dracoError) {
            console.warn('Could not configure Draco loader:', dracoError);
        }
    }
    
    // Load your local model
    console.log('Loading local model: models/product/product.glb');
    loader.load(
        'models/product/product.glb',
        function(gltf) {
            console.log('✅ Local model loaded successfully!');
            model = gltf.scene;
            
            // Scale the model appropriately
            const box = new THREE.Box3().setFromObject(model);
            const size = new THREE.Vector3();
            box.getSize(size);
            const maxDimension = Math.max(size.x, size.y, size.z);
            
            const scaleFactor = 3.5 / maxDimension;
            model.scale.setScalar(scaleFactor * 0.8);
            
            // Center the model
            box.setFromObject(model);
            const center = new THREE.Vector3();
            box.getCenter(center);
            
            model.position.x = -center.x;
            model.position.y = -center.y + 0.5;
            model.position.z = -center.z;
            
            // Setup materials
            model.traverse(function(child) {
                if (child.isMesh) {
                    child.castShadow = true;
                    child.receiveShadow = true;
                    
                    if (child.material) {
                        child.material.needsUpdate = true;
                        
                        if (child.material.type === 'MeshStandardMaterial' || 
                            child.material.type === 'MeshPhysicalMaterial') {
                            child.material.metalness = 0.8;
                            child.material.roughness = 0.2;
                            child.material.envMapIntensity = 1.0;
                        }
                    }
                }
            });
            
            scene.add(model);
            isModelLoaded = true;
            
            // Position camera
            adjustCameraForModel(model, camera);
            
            // Hide loader
            hideLoader();
            
            // Show success notice
            showDemoNotice('✅ AxonaPulse 3D Model Loaded');
            
            // Store references globally for scroll effects
            window.scene = scene;
            window.camera = camera;
            window.model = model;
            window.isModelLoaded = isModelLoaded;
            window.renderer = renderer;
            
            // Setup scroll animations
            setupProductScrollAnimations();
            
            console.log('Model loaded and ready');
        },
        function(xhr) {
            const percent = (xhr.loaded / (xhr.total || 10000000)) * 100;
            updateProgressBar(Math.min(percent, 100));
            updateLoaderMessage(`Loading 3D Model: ${Math.round(percent)}%`);
        },
        function(error) {
            console.error('❌ Failed to load local model:', error);
            updateLoaderMessage('Local model not found. Creating demonstration model...');
            
            // Create fallback model
            createFallbackModel(scene);
            isModelLoaded = true;
            
            // Adjust camera for fallback model
            adjustCameraForModel(model, camera);
            
            hideLoader();
            showDemoNotice('Using demonstration model');
            
            // Store references
            window.scene = scene;
            window.camera = camera;
            window.model = model;
            window.isModelLoaded = isModelLoaded;
            window.renderer = renderer;
            
            // Setup scroll animations
            setupProductScrollAnimations();
        }
    );
    
    function adjustCameraForModel(model, camera) {
        if (!model) return;
        
        const box = new THREE.Box3().setFromObject(model);
        const size = new THREE.Vector3();
        box.getSize(size);
        const center = new THREE.Vector3();
        box.getCenter(center);
        
        const maxDim = Math.max(size.x, size.y, size.z);
        const fov = camera.fov * (Math.PI / 180);
        let cameraZ = Math.abs(maxDim / Math.tan(fov / 2));
        
        cameraZ *= 1.5;
        camera.position.z = Math.max(cameraZ, 5);
        camera.position.y = center.y;
        camera.lookAt(center);
    }
    
    function createFallbackModel(scene) {
        console.log('Creating fallback demonstration model...');
        
        const group = new THREE.Group();
        
        // Create a neckwear-like shape
        const mainGeometry = new THREE.TorusGeometry(1.5, 0.3, 16, 100);
        const mainMaterial = new THREE.MeshPhysicalMaterial({
            color: 0x0ea5e9,
            metalness: 0.9,
            roughness: 0.1,
            clearcoat: 1,
            clearcoatRoughness: 0.05
        });
        const mainRing = new THREE.Mesh(mainGeometry, mainMaterial);
        
        const paddingGeometry = new THREE.TorusGeometry(1.2, 0.2, 16, 100);
        const paddingMaterial = new THREE.MeshStandardMaterial({
            color: 0x1e293b,
            roughness: 0.8,
            metalness: 0.1
        });
        const padding = new THREE.Mesh(paddingGeometry, paddingMaterial);
        
        const controlGeometry = new THREE.BoxGeometry(0.8, 0.4, 0.2);
        const controlMaterial = new THREE.MeshPhysicalMaterial({
            color: 0x334155,
            metalness: 0.95,
            roughness: 0.05
        });
        const controlUnit = new THREE.Mesh(controlGeometry, controlMaterial);
        controlUnit.position.set(0, 1.8, 0.3);
        
        // Add lights/indicators
        const lightGeometry = new THREE.SphereGeometry(0.05, 16, 16);
        const lightMaterial = new THREE.MeshBasicMaterial({ color: 0x10b981 });
        
        for (let i = 0; i < 8; i++) {
            const angle = (i / 8) * Math.PI * 2;
            const light = new THREE.Mesh(lightGeometry, lightMaterial);
            light.position.set(
                Math.cos(angle) * 1.5,
                Math.sin(angle) * 0.3,
                0.35
            );
            group.add(light);
        }
        
        group.add(mainRing);
        group.add(padding);
        group.add(controlUnit);
        model = group;
        scene.add(model);
        
        // Scale appropriately
        model.scale.setScalar(0.8);
        
        return model;
    }
    
    // Handle window resize
    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
        
        if (model) {
            adjustCameraForModel(model, camera);
        }
    }
    window.addEventListener('resize', onWindowResize);
    
    // Animation loop
    function animate() {
        requestAnimationFrame(animate);
        
        // Subtle floating motion when not scrolling
        if (model && isModelLoaded) {
            // Only float if we're not actively scrolling
            if (!ScrollTrigger.isScrolling || !window.scrollAnimationActive) {
                model.position.y += Math.sin(Date.now() * 0.001) * 0.0005;
            }
        }
        
        renderer.render(scene, camera);
    }
    animate();
}

// UI Helper functions (keep existing ones)
function updateLoaderMessage(message) {
    const loader = document.getElementById('loader');
    if (loader) {
        const h3 = loader.querySelector('h3');
        if (h3) {
            h3.textContent = message;
        }
    }
}

function updateProgressBar(percent) {
    const progressBar = document.querySelector('.progress-bar');
    if (progressBar) {
        progressBar.style.width = `${percent}%`;
    }
}

function hideLoader() {
    const loader = document.getElementById('loader');
    if (loader) {
        loader.style.opacity = '0';
        setTimeout(() => {
            loader.style.display = 'none';
        }, 500);
    }
}

function showDemoNotice(message) {
    const demoNotice = document.getElementById('demo-notice');
    if (demoNotice) {
        demoNotice.textContent = message;
        demoNotice.style.display = 'block';
        
        setTimeout(() => {
            demoNotice.style.opacity = '0.5';
            
            setTimeout(() => {
                demoNotice.style.display = 'none';
            }, 3000);
        }, 5000);
    }
}
    </script>
    <script src="main.js"></script>
</body>
</html>